---
title: 题解|1004.Medians Strike Back-2023暑期杭电多校07
date: 2023/8/8
updated: 2023/9/28
tags:
  - 2023暑期杭电多校
  - 构造
categories: 算法竞赛
keywords:
top_img: false
comments: true
cover:
toc: true
abbrlink: 3b5354e9
description: 题解|1004.Medians Strike Back-2023暑期杭电多校07 构造
toc_number:
toc_style_simple:
copyright:
copyright_author:
copyright_author_href:
copyright_url:
copyright_info:
highlight_shrink:
aside:
---

# 1004.Medians Strike Back
**构造**
## 题目大意
定义长度为 $n$ 的整数序列的中位数：
1. 如果 $n$ 为奇数，则中位数是将序列排序后正中间的数
2. 如果 $n$ 为偶数，则中位数是将序列排序后中间两个数中，出现次数较多的那个数，如果出现次数相同则取较小的那个数
   
定义序列的 $shikness$ ：该序列中位数出现的次数
定义序列的 $nitness$ ：该序列的所有连续子串的 $shikness$ 的最大值

给定一个正整数 $n$ ，构造长度为 $n$ 且仅含元素 $1,2,3$ 的序列，并使 $nitness$ 最小化，求出最小值

## 解题思路
构造找规律
$nitness_{min}=1$ 时，构造出最长序列为： $123$
$nitness_{min}=2$ 时，构造出最长序列为： $1313221313$
$nitness_{min}=3$ 时，构造出最长序列为： $131313222131313$
$nitness_{min}=4$ 时，构造出最长序列为： $1313131322131313132213131313$

如果序列中存在两个及以上的 $2$ ，那么 $2$ 是稳定作为中位数的，因此可以考虑以下构造方法：
连续 $n$ 对 $13$ 为一个单位子串//每个单位子串利用两个或三个连续的 $2$ 隔开，将得到以下格式的序列：$1313(n对)\cdots22\ 1313(n对)\cdots22\ 1313(n对)$

下面阐释这种构造方法的合法性
1. 对于整个序列， $nitness=cnt_2=n$ 
2. 对于含多个 $2$ 的子串， $2$ 稳定做中位数， $nitness<cnt_2=n$
3. 对于仅含一个 $2$ 的子串，这个 $2$ 一定在单位子串的左边或右边，而单位子串的长度为 $2n$ ，因此加上 $2$ 后的长度为奇数，$2$ 稳定做中位数，$nitness=1$
4. 对于不含 $2$ 的子串，其一定也是单位子串的子串，而单位子串中 $cnt_1=cnt3=n$ ，因此 $nitness\le n$

计数得到最长长度的通项公式： $len_i=2i(\lfloor \dfrac{i}{2} \rfloor+1)+i$

初始化长度数组，二分查找即可

## 参考代码
> 参考代码为已AC代码主干，其中部分功能需读者自行实现

```cpp
#define N 500000
vector<ll> v(N);
void solve()
{
    ll n;cin >> n;
    cout << lower_bound(ALL(v),n)-v.begin() << endl;
}
/*----------Initialize----------*/
    v[0]=0;
    FORLL(i,1,N){
        v[i]=(i/2+1)*2*i+i;
        if(v[i]>1e11) break;
    }v.shrink_to_fit();
/*----------Initialize----------*/
```